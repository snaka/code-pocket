<div id="result">
</div>

<%= javascript_tag do %>
  document.addEventListener("DOMContentLoaded", function() {
    console.log("Ready!");

    const eventSource = new EventSource("/stream");
    eventSource.addEventListener("message", function(event) {
      console.log(event);
      document.querySelector("#result").innerText = event.data;
    });
    eventSource.addEventListener("done", function(event) {
      console.log(event);
      document.querySelector("#result").innerText = event.data;
    });
  });
<% end %>
